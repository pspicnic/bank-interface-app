--USE master;  

--Delete the BANK-INTERFACE database if it exists.  
IF EXISTS(SELECT * from sys.databases WHERE name='BANK-INTERFACE')  
BEGIN  
    DROP DATABASE [BANK-INTERFACE]  
END  

--Create a new database called BANK-INTERFACE.  

CREATE DATABASE [BANK-INTERFACE]

USE [BANK-INTERFACE]

--SCHEMA NAME  BANK-INTERFACE
IF EXISTS (SELECT * FROM [BANK-INTERFACE].[dbo].SYSOBJECTS WHERE NAME LIKE 'BANK_COLLECTIONS') 
BEGIN
	DROP TABLE BANK_COLLECTIONS
END


CREATE TABLE dbo.BANK_COLLECTIONS ( 
    ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
    MEMBER_NUMBER BIGINT,
    BENEFIT_NUMBER BIGINT, 
    ANNIVERSARY_DATE DATETIME2(0), 
    CLOSING_BALANCE NUMERIC(10,0),
    MONTHLY_PREMIUM NUMERIC(10,0) NOT NULL,
    BILL_RAISED NUMERIC(10,0),
    FREQUENCY VARCHAR(50) NOT NULL,
    PAYMENT_METHOD VARCHAR(50) NOT NULL,
    COLLECTION_DATE VARCHAR(100),
    ACCOUNT_HOLDER_NAME VARCHAR(100) NOT NULL,
    BANK VARCHAR(100),
    ACCOUNT_NUMBER VARCHAR(100) NOT NULL,
    COLLATION_ID BIGINT,
    STATUS VARCHAR(100), 
    CREATION_DATE DATETIME2(0) NOT NULL,
    STATUS_MODIFIED_DATE DATETIME2(0),
    CREDIT_CARD_EXPIRY_DATE VARCHAR(100),
    RECORD_TYPE VARCHAR(100),
    BSB_NUMBER VARCHAR(100),
    INDICATOR VARCHAR(10),
    TRANSACTION_CODE VARCHAR(10),
    TITLE_OF_ACCOUNT VARCHAR(100),
    LODGEMENT_REFERENCE VARCHAR(100),
    BSB_NUMBER_IN_FORMAT VARCHAR(100),
    ACCOUNT_NUMBER_TRACE VARCHAR(100),
    NAME_OF_REMITTER VARCHAR(100),
    AMOUNT_OF_WITHHOLDING_TAX VARCHAR(100),
    IS_COLLATED VARCHAR(10)

) ON [PRIMARY]



IF (SELECT * FROM [BANK-INTERFACE].[dbo].SYSOBJECTS WHERE NAME LIKE 'BANK_COLLATION')  
BEGIN
	DROP TABLE BANK_COLLATION
END

CREATE TABLE dbo.BANK_COLLATION (

    ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
    UUID VARCHAR(1000),
    MEMBER_NUMBER BIGINT,
    ANNIVERSARY_DATE DATETIME2(0),
    TOTAL_MONTHLY_PREMIUM NUMERIC(10,0) NOT NULL,
    TOTAL_BILL_RAISED NUMERIC(10,0),
    CLOSING_BALANCE NUMERIC(10,0),
    FREQUENCY VARCHAR(50) NOT NULL,
    PAYMENT_METHOD VARCHAR(50) NOT NULL,
    COLLECTION_DATE VARCHAR(10),
    COLLECTION_DATE_DATE DATETIME2(0),
    ACCOUNT_HOLDER_NAME VARCHAR(100) NOT NULL,
    BANK VARCHAR(100),
    ACCOUNT_NUMBER VARCHAR(100) NOT NULL,
    RECORD_TYPE VARCHAR(100),
    CREDIT_CARD_EXPIRY_DATE VARCHAR(100),
    BSB_NUMBER VARCHAR(100),
    INDICATOR VARCHAR(10),
    TRANSACTION_CODE VARCHAR(10),
    TITLE_OF_ACCOUNT VARCHAR(100),
    LODGEMENT_REFERENCE VARCHAR(100),
    BSB_NUMBER_IN_FORMAT VARCHAR(100),
    ACCOUNT_NUMBER_TRACE VARCHAR(100),
    NAME_OF_REMITTER VARCHAR(100),
    AMOUNT_OF_WITHHOLDING_TAX VARCHAR(100),
    TRANSACTION_STATUS VARCHAR(100),
    CREATION_STATUS VARCHAR(100),
    CREATION_DATE DATETIME2(0),
    PROCESSED_DATE DATETIME2(0)

) ON [PRIMARY]


IF (SELECT *FROM [BANK-INTERFACE].[dbo].SYSOBJECTS WHERE NAME LIKE 'BANK_COLLATION_HEADER')
BEGIN
	DROP TABLE BANK_COLLATION_HEADER
END

CREATE TABLE dbo.BANK_COLLATION_HEADER (

	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	REEL_SEQUENCE_NUMBER BIGINT,
	FINANCIAL_INSTITUTION VARCHAR(100), 
	NAME_OF_USER_SUPPLYING_FILE VARCHAR(1000),
	NUMBER_OF_USER_SUPPLYING_FILE BIGINT,
	DESCRIPTION_OF_ENTRIES_ON_FILE VARCHAR(100),
	PPS_REMITTER_NAME VARCHAR(100),
	PPS_ACCOUNT_NUMBER_TRACE VARCHAR(100),
	PPS_BSB_NUMBER VARCHAR(100),
	DATE_OF_PROCESSING VARCHAR(100),
	CLIENT_ID VARCHAR(100)

) ON [PRIMARY]

	


